<!DOCTYPE html>

<html>

<script src="https://code.jquery.com/jquery-3.1.0.min.js"></script>
  <head>
    <meta charset="UTF-8">
    <title>Canvas</title>

    <style type="text/css">
		canvas {
			border: 1px solid grey; 
		}
    </style>

  </head>

  <body>

    <canvas id="canvas-for-ball"></canvas>

    <script type="text/javascript">
		 // Ball class representing the peace sign ball
		 class Ball {
            constructor(x, y, radius, xVelocity, yVelocity, rotationSpeed) {
                this.x = x; // x position of the ball
                this.y = y; // y position of the ball
                this.radius = radius; // radius of the ball
                this.xVelocity = xVelocity; // horizontal velocity
                this.yVelocity = yVelocity; // vertical velocity
                this.rotationSpeed = rotationSpeed; // speed of rotation
                this.rotationAngle = 0; // current rotation angle
            }

            // Draw the ball
            draw(ctx) {
                ctx.save();
                ctx.translate(this.x, this.y);
                ctx.rotate(this.rotationAngle);

                // Draw outer circle (ball)
                ctx.beginPath();
                ctx.arc(0, 0, this.radius, 0, Math.PI * 2);
                ctx.stroke();

                ctx.restore();
            }

            // Move the ball and handle wall collisions
            move(canvasWidth, canvasHeight) {
                this.x += this.xVelocity;
                this.y += this.yVelocity;

                // Collision detection for left/right walls
                if (this.x - this.radius <= 0 || this.x + this.radius >= canvasWidth) {
                    this.xVelocity = -this.xVelocity; // Reverse direction
                    this.rotationSpeed = -this.rotationSpeed;
                }

                // Collision detection for top/bottom walls
                if (this.y - this.radius <= 0 || this.y + this.radius >= canvasHeight) {
                    this.yVelocity = -this.yVelocity;
                    this.rotationSpeed = -this.rotationSpeed;
                }

                // Update the rotation angle
                this.rotationAngle += this.rotationSpeed;
            }
        }

		// Paddle class 
        class Paddle {
            constructor(x, y, width, height, speed) {
                this.x = x; // x position of the paddle
                this.y = y; // y position of the paddle
                this.width = width; // width of the paddle
                this.height = height; // height of the paddle
                this.speed = speed; // speed of movement
                this.xVelocity = 0; // initial velocity
            }

			// Draw the paddle
            draw(ctx) {
                ctx.fillStyle = 'blue'; 
                ctx.fillRect(this.x, this.y, this.width, this.height);
            }

             // Move the paddle
             move(canvasWidth) {
                this.x += this.xVelocity;
             }

            // Change the paddle's velocity based on the key pressed
            updateVelocity(direction) {
                if (direction === 'left') {
                    this.xVelocity = -this.speed;
                } else if (direction === 'right') {
                    this.xVelocity = this.speed;
                } else if (direction === 'stop') {
                    this.xVelocity = 0; // Stop moving when key is released
                }
            
		}
            
    }
              // Set up the canvas and its context
             const canvas = document.getElementById("canvas-for-ball");
             const ctx = canvas.getContext("2d");

              // Create a new ball object
             let ball = new Ball(150, 150, 20, 2, 2, 0.05);

             // Create a new paddle object
        let paddle = new Paddle(200, canvas.height - 20, 100, 10, 5);

               // Handle keyboard input for paddle movement
        window.addEventListener("keydown", function(event) {
            if (event.key === 'ArrowLeft') {
                paddle.updateVelocity('left');
            } else if (event.key === 'ArrowRight') {
                paddle.updateVelocity('right');
            }
        });

        window.addEventListener("keyup", function(event) {
            if (event.key === 'ArrowLeft' || event.key === 'ArrowRight') {
                paddle.updateVelocity('stop');
            }
        });

        // Animation loop
        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Move and draw the ball
            ball.move(canvas.width, canvas.height);
            ball.draw(ctx);

            // Move and draw the paddle
            paddle.move(canvas.width);
            paddle.draw(ctx);

            // Continue the animation
            window.requestAnimationFrame(animate);
        }

        // Start the animation
        animate();
    </script>
</body>
</html>
